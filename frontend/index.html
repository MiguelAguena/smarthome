<!DOCTYPE html>
<head>
    <title>Controle de Temperatura</title>
</head>
<body>
    <p id="timer"></p>
    <p>Speed multiplier: </p><input type="number" id="multiplier" value="1" min="1">
    <p>Temperature: </p><input type="number" id="temperature" value="0" min="0">
    <script>
        var xmlhttp = new XMLHttpRequest();

        var staticDate = new Date()
        var date = new Date()
        date.setHours(0, 0, 0, 0)

        var update = function() {
            document.getElementById("timer").innerHTML = date.getTime()
            date.setSeconds(date.getSeconds() + 1)

            let obj = {temp:document.getElementById("temperature").value, timestamp:date.getTime()}
            xmlhttp.open("POST", "http://localhost:8000/writeTemp", true);
            xmlhttp.setRequestHeader('Content-Type', 'application/json')
            xmlhttp.send(JSON.stringify(obj));
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                }
            };

            setTimeout(update, 1000 / document.getElementById("multiplier").value)
        }
        
        setTimeout(update, 1000 / document.getElementById("multiplier").value)
    </script>
</body>